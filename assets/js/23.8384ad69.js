(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{367:function(s,n,e){"use strict";e.r(n);var a=e(0),t=Object(a.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"前言"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),n("p",[s._v("在我们维护的业务集群中，有些服务如监控相关在部署时没有采用高可用的方案，对接的存储使用了openebs hostpath或者其它的存储方案，并未支持多副本，这样会导致当监控服务所在的节点异常后，对应的prometheus或者grafana等持久化数据的服务无法恢复。这里由于设备的磁盘等相关限制，无法针对当前环境部署新的支持多副本的分布式存储。")]),s._v(" "),n("p",[s._v("基于此问题，我们考虑对于监控这种非核心的业务，直接接入外部的存储，考虑到外部存储可选择的较多如NFS，Ceph，Gluster等。对于监控这种服务不涉及共享PV的读写，因此我们优先选择块存储来提高性能。考虑需要存储数据的高可用，我们选择分布式存储，保证后续的可扩展性，这里我们选择Ceph的RBD进行测试。")]),s._v(" "),n("h2",{attrs:{id:"ceph支持k8s存储介绍"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ceph支持k8s存储介绍"}},[s._v("#")]),s._v(" ceph支持k8s存储介绍")]),s._v(" "),n("p",[s._v("Ceph支持Kubernetes存储有两种类型：")]),s._v(" "),n("ul",[n("li",[s._v("Cephfs")]),s._v(" "),n("li",[s._v("Ceph RBD")])]),s._v(" "),n("h2",{attrs:{id:"ceph集群部署"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ceph集群部署"}},[s._v("#")]),s._v(" ceph集群部署")]),s._v(" "),n("ol",[n("li",[s._v("部署ceph集群")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 这里我们测试只有一台机器，因此我们部署单机。详细部署可以直接参考官网文档\n$ hostnamectl set-hostname ceph01\n$ systemctl disable --now firewalld\n$ yum install epel* -y \n$ yum install -y python3 docker-ce docker-ce-cli ceph-common ceph\n$ systemctl restart docker && systemctl enable docker\n\n$ wget https://github.com/ceph/ceph/raw/v15.2.17/src/cephadm/cephadm\n$ chmod +x cephadm && mv cephadm /usr/bin/\n$ grep quay.io /usr/bin/cephadm |awk '{print $3}' |xargs -i docker pull {}\n$ cephadm bootstrap --mon-ip 10.8.29.87\n$ cephadm add-repo --release 15.2.17\n$ ceph orch host add ceph01\n$ ceph orch apply osd --all-available-devices\n# 注意, 加到OSD的磁盘不能存在分区，可以使用下面的命名进行格式化\n$ ceph orch device zap ceph01 /dev/sdb --force\n$ ceph orch device zap ceph01 /dev/sdc --force\n# 设置默认的存储池副本数为2\n$ ceph config set global osd_pool_default_size 2\n\n# 注意, 对于单机我们可以设置故障域为OSD，从而实现多副本\n$ ceph osd getcrushmap -o crushmap.encode\n$ crushtool -d crushmap.encode -o crushmap.decode\n$ vim crushmap.decode\n....\n# rules\nrule replicated_rule {\n\tid 0\n\ttype replicated\n\tmin_size 1\n\tmax_size 10\n\tstep take default\n\tstep chooseleaf firstn 0 type osd    # 这里修改host为osd\n\tstep emit\n}\n# 这里注入我们修改过故障域的crushmap\n$ crushtool -c crushmap.decode -o crushmap_new\n$ ceph osd setcrushmap -i crushmap_new\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("查看集群状态：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[root@ceph01 ~]# ceph -v \nceph version 15.2.17 (8a82819d84cf884bd39c17e3236e0632ac146dc4) octopus (stable)\n[root@ceph01 ~]# ceph -s\n  cluster:\n    id:     3c4a4956-ecf7-11ee-b392-b49691393a30\n    health: HEALTH_OK\n\n  services:\n    mon: 1 daemons, quorum ceph01 (age 4d)\n    mgr: ceph01.puytzc(active, since 4d)\n    osd: 2 osds: 2 up (since 4d), 2 in (since 4d)\n\n  data:\n    pools:   2 pools, 33 pgs\n    objects: 62 objects, 50 MiB\n    usage:   2.2 GiB used, 15 TiB / 15 TiB avail\n    pgs:     33 active+clean\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[s._v("创建和初始化RBD存储池")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ ceph osd pool create kubernetes 32 32 \n$ rbd pool init kubernetes\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h2",{attrs:{id:"配置ceph-csi-在ceph集群操作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置ceph-csi-在ceph集群操作"}},[s._v("#")]),s._v(" 配置ceph-csi（在ceph集群操作）")]),s._v(" "),n("ol",[n("li",[s._v("为kubernetes和ceph-csi创建一个新用户(也可以使用默认的client.admin用户)")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ ceph auth get-or-create client.kubernetes mon 'profile rbd' osd 'profile rbd pool=kubernetes' mgr 'profile rbd pool=kubernetes'\n[client.kubernetes]\n    key = AQD9o0Fd6hQRChAAt7fMaSZXduT3NWEqylNpmg==\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("创建ceph-csi configmap\n"),n("strong",[s._v("在ceph集群执行如下命令，获取ceph集群的fsid（对应fsid行后面字符串）和mon地址（最后一行6789端口的地址）")])])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[root@ceph01 ~]# ceph mon dump\ndumped monmap epoch 1\nepoch 1\nfsid 3c4a4956-ecf7-11ee-b392-b49691393a30\nlast_changed 2024-03-28T11:35:16.640961+0000\ncreated 2024-03-28T11:35:16.640961+0000\nmin_mon_release 15 (octopus)\n0: [v2:10.8.29.87:3300/0,v1:10.8.29.87:6789/0] mon.ceph01\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[n("strong",[s._v("在k8s集群执行如下命令，创建ceph集群的configmap")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('$ cat <<EOF > csi-config-map.yaml\n---\napiVersion: v1\nkind: ConfigMap\ndata:\n  config.json: |-\n    [\n      {\n        "clusterID": "3c4a4956-ecf7-11ee-b392-b49691393a30",\n        "monitors": [\n          "10.8.29.87:6789"\n        ]\n      }\n    ]\nmetadata:\n  name: ceph-csi-config\nEOF\n# 应用yaml文件\n$ kubectl apply -f csi-config-map.yaml\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])]),n("p",[n("strong",[s._v("创建KMS provider所使用的ConfigMap文件")]),s._v("\n最新版本的ceph-csi还需要一个额外的ConfigMap对象来定义密钥管理服务(KMS)提供程序的详细信息。如果没有设置KMS，在csi-kms-config-map中放置一个空配置即可")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ cat <<EOF > csi-kms-config-map.yaml\n---\napiVersion: v1\nkind: ConfigMap\ndata:\n  config.json: |-\n    {}\nmetadata:\n  name: ceph-csi-encryption-kms-config\nEOF\n# 应用yaml文件\n$ kubectl apply -f csi-kms-config-map.yaml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("p",[n("strong",[s._v("创建保存Ceph配置的ConfigMap")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ cat <<EOF > ceph-config-map.yaml\n---\napiVersion: v1\nkind: ConfigMap\ndata:\n  ceph.conf: |\n    [global]\n    auth_cluster_required = cephx\n    auth_service_required = cephx\n    auth_client_required = cephx\n  # keyring is a required key and its value should be empty\n  keyring: |\nmetadata:\n  name: ceph-config\nEOF\n# 应用yaml文件\n$ kubectl apply -f ceph-config-map.yaml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("p",[n("strong",[s._v("创建ceph-csi cephx secret")]),s._v("\nceph-csi需要cephx凭据才能与Ceph集群通信")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 这里可以直接用client.admin的用户，具体查看可以在ceph集群执行```ceph auth list```查看\n$ cat <<EOF > csi-rbd-secret.yaml\n---\napiVersion: v1\nkind: Secret\nmetadata:\n  name: csi-rbd-secret\n  namespace: default\nstringData:\n  userID: admin\n  userKey: AQDzVQVmXmBIOhAA6GdWny0CNISY/6jnmVCrNA==\nEOF\n# 应用yaml文件\n$ kubectl apply -f csi-rbd-secret.yaml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("p",[n("strong",[s._v("配置ceph-csi plugins")]),s._v("\n创建需要的ServiceAccount和RBAC ClusterRole/ClusterRoleBinding")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ kubectl apply -f https://raw.githubusercontent.com/ceph/ceph-csi/master/deploy/rbd/kubernetes/csi-provisioner-rbac.yaml\n$ kubectl apply -f https://raw.githubusercontent.com/ceph/ceph-csi/master/deploy/rbd/kubernetes/csi-nodeplugin-rbac.yaml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("创建ceph-csi provisioner 和node plugins")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('# 由于yaml文件里面的镜像是国外的地址源，因此这里改成自己的镜像地址\nwget https://raw.githubusercontent.com/ceph/ceph-csi/master/deploy/rbd/kubernetes/csi-rbdplugin-provisioner.yaml\nwget https://raw.githubusercontent.com/ceph/ceph-csi/master/deploy/rbd/kubernetes/csi-rbdplugin.yaml\n# 注意将原始文件的镜像地址修改为下面阿里云镜像仓库的地址\n$ grep -R "image:" * \ncsi-rbdplugin-provisoner.yaml:          image: registry.cn-hangzhou.aliyuncs.com/postkarte/cephcsi:canary\ncsi-rbdplugin-provisoner.yaml:          image: registry.cn-hangzhou.aliyuncs.com/google_containers/csi-provisioner:v4.0.0\ncsi-rbdplugin-provisoner.yaml:          image: registry.cn-hangzhou.aliyuncs.com/google_containers/csi-snapshotter:v7.0.0\ncsi-rbdplugin-provisoner.yaml:          image: registry.cn-hangzhou.aliyuncs.com/google_containers/csi-attacher:v4.5.0\ncsi-rbdplugin-provisoner.yaml:          image: registry.cn-hangzhou.aliyuncs.com/google_containers/csi-resizer:v1.10.0\ncsi-rbdplugin-provisoner.yaml:          image: registry.aliyuncs.com/postkarte/cephcsi:canary\ncsi-rbdplugin-provisoner.yaml:          image: registry.aliyuncs.com/postkarte/cephcsi:canary\ncsi-rbdplugin.yaml:          image: registry.cn-hangzhou.aliyuncs.com/postkarte/cephcsi:canary\ncsi-rbdplugin.yaml:          image: registry.cn-hangzhou.aliyuncs.com/google_containers/csi-node-driver-registrar:v2.10.0\ncsi-rbdplugin.yaml:          image: registry.cn-hangzhou.aliyuncs.com/postkarte/cephcsi:canary\n# 应用yaml文件\n$ kubectl apply -f csi-rbdplugin-provisioner.yaml \n$ kubectl apply -f csi-rbdplugin.yaml \n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("p",[n("strong",[s._v("创建storageclass")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v(" cat <<EOF > csi-rbd-sc.yaml\n---\napiVersion: storage.k8s.io/v1\nkind: StorageClass\nmetadata:\n   name: csi-rbd-sc\nprovisioner: rbd.csi.ceph.com\nparameters:\n   clusterID: 3c4a4956-ecf7-11ee-b392-b49691393a30  # 注意修改集群的fsid\n   pool: kubernetes\n   imageFeatures: layering\n   csi.storage.k8s.io/provisioner-secret-name: csi-rbd-secret\n   csi.storage.k8s.io/provisioner-secret-namespace: default\n   csi.storage.k8s.io/controller-expand-secret-name: csi-rbd-secret\n   csi.storage.k8s.io/controller-expand-secret-namespace: default\n   csi.storage.k8s.io/node-stage-secret-name: csi-rbd-secret\n   csi.storage.k8s.io/node-stage-secret-namespace: default\nreclaimPolicy: Delete\nallowVolumeExpansion: true\nmountOptions:\n   - discard\nEOF\n# 应用yaml文件\n$ kubectl apply -f csi-rbd-sc.yaml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])]),n("p",[s._v("** 查看ceph csi插件状态")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 查看插件POD运行状态\n$ kubectl get pod\nNAME                                         READY   STATUS    RESTARTS   AGE\ncsi-rbdplugin-5vvdc                          3/3     Running   0          15h\ncsi-rbdplugin-provisioner-6977c6b67d-8jh6w   7/7     Running   0          15h\n$ 查看StorageClass\n$ kubectl get sc\nNAME                          PROVISIONER                    RECLAIMPOLICY   VOLUMEBINDINGMODE      ALLOWVOLUMEEXPANSION   AGE\ncsi-rbd-sc                    rbd.csi.ceph.com               Delete          Immediate              true                   15h\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h2",{attrs:{id:"测试"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#测试"}},[s._v("#")]),s._v(" 测试")]),s._v(" "),n("ol",[n("li",[s._v("创建一个简单的POD进行测试")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ cat test-pvc.yaml\n---\napiVersion: v1\nkind: PersistentVolumeClaim\nmetadata:\n  name: raw-block-pvc\nspec:\n  accessModes:\n    - ReadWriteOnce\n  volumeMode: Filesystem\n  resources:\n    requests:\n      storage: 1Gi\n  storageClassName: csi-rbd-sc\n$ kubectl apply -f test-pvc.yaml\n\n$ cat test-pod.yaml\n---\napiVersion: v1\nkind: Pod\nmetadata:\n  name: csi-rbd-demo-pod\nspec:\n  containers:\n    - name: web-server\n      image: nginx\n      volumeMounts:\n        - name: mypvc\n          mountPath: /var/lib/www/html\n  volumes:\n    - name: mypvc\n      persistentVolumeClaim:\n        claimName: raw-block-pvc\n$ kubectl apply -f test-pod.yaml\n# 查看创建的POD和PVC\n$ kubectl get pod\nNAME                                         READY   STATUS    RESTARTS   AGE\ncsi-rbd-demo-pod                             1/1     Running   0          78m\n$ kubectl get pvc\nNAME            STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE\nraw-block-pvc   Bound    pvc-2966202c-5903-494d-a3cd-545e0595bcf9   1Gi        RWO            csi-rbd-sc     78m\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("prometheus测试")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# helm 部署\n$ helm install prometheus  ./kube-prometheus -f prometheus-values.yaml --namespace monitoring\n# 查看pod和pvc\n$ kubectl get pod -n monitoring\nNAME                                             READY   STATUS    RESTARTS   AGE\nalertmanager-prometheus-alertmanager-0           2/2     Running   0          67m\nprometheus-blackbox-exporter-6686495fc-ft7fr     1/1     Running   0          67m\nprometheus-kube-state-metrics-5b77fdf784-2724j   1/1     Running   0          67m\nprometheus-node-exporter-tm2cc                   1/1     Running   0          67m\nprometheus-operator-69c67867b6-72ll7             1/1     Running   0          67m\nprometheus-prometheus-prometheus-0               2/2     Running   0          67m\n$ kubectl get pvc -n monitoring\nNAME                                                                             STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE\nalertmanager-prometheus-alertmanager-db-alertmanager-prometheus-alertmanager-0   Bound    pvc-3a6b531f-4f58-43f9-9716-7c9bfa8ae767   8Gi        RWO            csi-rbd-sc     67m\nprometheus-prometheus-prometheus-db-prometheus-prometheus-prometheus-0           Bound    pvc-a4ced6a9-f7f6-432f-b1a7-bcb81d932da9   8Gi        RWO            csi-rbd-sc     67m\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("h2",{attrs:{id:"question"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#question"}},[s._v("#")]),s._v(" Question")]),s._v(" "),n("p",[s._v("1.可以查看的文档链接？\n"),n("a",{attrs:{href:"https://docs.ceph.com/en/latest/rbd/rbd-kubernetes/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Ceph Csi部署"),n("OutboundLink")],1),s._v(" "),n("a",{attrs:{href:"https://github.com/ceph/ceph-csi#support-matrix",target:"_blank",rel:"noopener noreferrer"}},[s._v("Ceph Csi插件"),n("OutboundLink")],1),s._v("\n2.ceph csi和k8s，ceph集群兼容版本?")]),s._v(" "),n("table",[n("thead",[n("tr",[n("th",[s._v("Plugin")]),s._v(" "),n("th",[s._v("Features")]),s._v(" "),n("th",[s._v("Feature Status")]),s._v(" "),n("th",[s._v("CSI Driver Version")]),s._v(" "),n("th",[s._v("CSI Spec Version")]),s._v(" "),n("th",[s._v("Ceph Cluster Version")]),s._v(" "),n("th",[s._v("Kubernetes Version")])])]),s._v(" "),n("tbody",[n("tr",[n("td",[s._v("RBD")]),s._v(" "),n("td",[s._v("Dynamically provision, de-provision Block mode RWO volume")]),s._v(" "),n("td",[s._v("GA")]),s._v(" "),n("td",[s._v(">= v1.0.0")]),s._v(" "),n("td",[s._v(">= v1.0.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.14.0")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("Dynamically provision, de-provision Block mode RWX volume")]),s._v(" "),n("td",[s._v("GA")]),s._v(" "),n("td",[s._v(">= v1.0.0")]),s._v(" "),n("td",[s._v(">= v1.0.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.14.0")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("Dynamically provision, de-provision Block mode RWOP volume")]),s._v(" "),n("td",[s._v("Alpha")]),s._v(" "),n("td",[s._v(">= v3.5.0")]),s._v(" "),n("td",[s._v(">= v1.5.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.22.0")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("Dynamically provision, de-provision File mode RWO volume")]),s._v(" "),n("td",[s._v("GA")]),s._v(" "),n("td",[s._v(">= v1.0.0")]),s._v(" "),n("td",[s._v(">= v1.0.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.14.0")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("Dynamically provision, de-provision File mode RWOP volume")]),s._v(" "),n("td",[s._v("Alpha")]),s._v(" "),n("td",[s._v(">= v3.5.0")]),s._v(" "),n("td",[s._v(">= v1.5.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.22.0")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("Provision File Mode ROX volume from snapshot")]),s._v(" "),n("td",[s._v("Alpha")]),s._v(" "),n("td",[s._v(">= v3.0.0")]),s._v(" "),n("td",[s._v(">= v1.0.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.17.0")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("Provision File Mode ROX volume from another volume")]),s._v(" "),n("td",[s._v("Alpha")]),s._v(" "),n("td",[s._v(">= v3.0.0")]),s._v(" "),n("td",[s._v(">= v1.0.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.16.0")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("Provision Block Mode ROX volume from snapshot")]),s._v(" "),n("td",[s._v("Alpha")]),s._v(" "),n("td",[s._v(">= v3.0.0")]),s._v(" "),n("td",[s._v(">= v1.0.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.17.0")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("Provision Block Mode ROX volume from another volume")]),s._v(" "),n("td",[s._v("Alpha")]),s._v(" "),n("td",[s._v(">= v3.0.0")]),s._v(" "),n("td",[s._v(">= v1.0.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.16.0")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("Creating and deleting snapshot")]),s._v(" "),n("td",[s._v("GA")]),s._v(" "),n("td",[s._v(">= v1.0.0")]),s._v(" "),n("td",[s._v(">= v1.0.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.17.0")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("Provision volume from snapshot")]),s._v(" "),n("td",[s._v("GA")]),s._v(" "),n("td",[s._v(">= v1.0.0")]),s._v(" "),n("td",[s._v(">= v1.0.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.17.0")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("Provision volume from another volume")]),s._v(" "),n("td",[s._v("GA")]),s._v(" "),n("td",[s._v(">= v1.0.0")]),s._v(" "),n("td",[s._v(">= v1.0.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.16.0")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("Expand volume")]),s._v(" "),n("td",[s._v("Beta")]),s._v(" "),n("td",[s._v(">= v2.0.0")]),s._v(" "),n("td",[s._v(">= v1.1.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.15.0")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("Volume/PV Metrics of File Mode Volume")]),s._v(" "),n("td",[s._v("GA")]),s._v(" "),n("td",[s._v(">= v1.2.0")]),s._v(" "),n("td",[s._v(">= v1.1.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.15.0")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("Volume/PV Metrics of Block Mode Volume")]),s._v(" "),n("td",[s._v("GA")]),s._v(" "),n("td",[s._v(">= v1.2.0")]),s._v(" "),n("td",[s._v(">= v1.1.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.21.0")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("Topology Aware Provisioning Support")]),s._v(" "),n("td",[s._v("Alpha")]),s._v(" "),n("td",[s._v(">= v2.1.0")]),s._v(" "),n("td",[s._v(">= v1.1.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.14.0")])]),s._v(" "),n("tr",[n("td",[s._v("CephFS")]),s._v(" "),n("td",[s._v("Dynamically provision, de-provision File mode RWO volume")]),s._v(" "),n("td",[s._v("GA")]),s._v(" "),n("td",[s._v(">= v1.1.0")]),s._v(" "),n("td",[s._v(">= v1.0.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.14.0")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("Dynamically provision, de-provision File mode RWX volume")]),s._v(" "),n("td",[s._v("GA")]),s._v(" "),n("td",[s._v(">= v1.1.0")]),s._v(" "),n("td",[s._v(">= v1.0.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.14.0")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("Dynamically provision, de-provision File mode ROX volume")]),s._v(" "),n("td",[s._v("Alpha")]),s._v(" "),n("td",[s._v(">= v3.0.0")]),s._v(" "),n("td",[s._v(">= v1.0.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.14.0")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("Dynamically provision, de-provision File mode RWOP volume")]),s._v(" "),n("td",[s._v("Alpha")]),s._v(" "),n("td",[s._v(">= v3.5.0")]),s._v(" "),n("td",[s._v(">= v1.5.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.22.0")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("Creating and deleting snapshot")]),s._v(" "),n("td",[s._v("GA")]),s._v(" "),n("td",[s._v(">= v3.1.0")]),s._v(" "),n("td",[s._v(">= v1.0.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.17.0")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("Provision volume from snapshot")]),s._v(" "),n("td",[s._v("GA")]),s._v(" "),n("td",[s._v(">= v3.1.0")]),s._v(" "),n("td",[s._v(">= v1.0.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.17.0")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("Provision volume from another volume")]),s._v(" "),n("td",[s._v("GA")]),s._v(" "),n("td",[s._v(">= v3.1.0")]),s._v(" "),n("td",[s._v(">= v1.0.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.16.0")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("Expand volume")]),s._v(" "),n("td",[s._v("Beta")]),s._v(" "),n("td",[s._v(">= v2.0.0")]),s._v(" "),n("td",[s._v(">= v1.1.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.15.0")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("Volume/PV Metrics of File Mode Volume")]),s._v(" "),n("td",[s._v("GA")]),s._v(" "),n("td",[s._v(">= v1.2.0")]),s._v(" "),n("td",[s._v(">= v1.1.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.15.0")])]),s._v(" "),n("tr",[n("td",[s._v("NFS")]),s._v(" "),n("td",[s._v("Dynamically provision, de-provision File mode RWO volume")]),s._v(" "),n("td",[s._v("Alpha")]),s._v(" "),n("td",[s._v(">= v3.6.0")]),s._v(" "),n("td",[s._v(">= v1.0.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.14.0")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("Dynamically provision, de-provision File mode RWX volume")]),s._v(" "),n("td",[s._v("Alpha")]),s._v(" "),n("td",[s._v(">= v3.6.0")]),s._v(" "),n("td",[s._v(">= v1.0.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.14.0")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("Dynamically provision, de-provision File mode ROX volume")]),s._v(" "),n("td",[s._v("Alpha")]),s._v(" "),n("td",[s._v(">= v3.6.0")]),s._v(" "),n("td",[s._v(">= v1.0.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.14.0")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("Dynamically provision, de-provision File mode RWOP volume")]),s._v(" "),n("td",[s._v("Alpha")]),s._v(" "),n("td",[s._v(">= v3.6.0")]),s._v(" "),n("td",[s._v(">= v1.5.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.22.0")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("Expand volume")]),s._v(" "),n("td",[s._v("Alpha")]),s._v(" "),n("td",[s._v(">= v3.7.0")]),s._v(" "),n("td",[s._v(">= v1.1.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.15.0")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("Creating and deleting snapshot")]),s._v(" "),n("td",[s._v("Alpha")]),s._v(" "),n("td",[s._v(">= v3.7.0")]),s._v(" "),n("td",[s._v(">= v1.1.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.17.0")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("Provision volume from snapshot")]),s._v(" "),n("td",[s._v("Alpha")]),s._v(" "),n("td",[s._v(">= v3.7.0")]),s._v(" "),n("td",[s._v(">= v1.1.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.17.0")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("Provision volume from another volume")]),s._v(" "),n("td",[s._v("Alpha")]),s._v(" "),n("td",[s._v(">= v3.7.0")]),s._v(" "),n("td",[s._v(">= v1.1.0")]),s._v(" "),n("td",[s._v("Pacific (>=v16.2.0)")]),s._v(" "),n("td",[s._v(">= v1.16.0")])])])])])}),[],!1,null,null,null);n.default=t.exports}}]);